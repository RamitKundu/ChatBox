app.controller('BlogController', [ 'BlogService', '$http', '$scope',
		'$location','$rootScope', function(BlogService, $http, $scope, $location,$rootScope) {
			var self = this;
			self.blog = {};
			self.bloglist = [];
			self.allBlogs=false;
			self.writeBlog=true;
			self.myBlog=[];
			self.myBlogList=false;
//			self.comment={};
			self.selectedBlog=blg;
			
			
			self.createBlog = function() {
				self.blog.user=$rootScope.currentUser;
				console.log("Blog controller called");
				console.log(self.blog.guest);
				BlogService.addBlog(self.blog).then(function(response) {
					self.blog = response.data;
					$location.path('/home');
				}, function(error) {
					console.log(error);
				});
			}

			self.getBlogList = function() {
				
				console.log("BlogList controller called");
				BlogService.listBlog().then(function(response) {
					self.bloglist = response.data;
					console.log(self.bloglist);
					 //$location.path('/getallblogs');
					self.allBlogs=true;
					self.writeBlog=false;
				}, function(error) {
					console.log(error);
				});
			}
			
			self.getmyBlog= function() {
				self.blog.user=$rootScope.currentUser;
				console.log("show my MyBlogList ");
				
				BlogService.myBlogs($rootScope.currentUser.userId).then(function(response) {
					
					 $rootScope.currentUser.userId;
					console.log(self.blog.user);
					self.myBlog = response.data;
					console.log(self.bloglist);
					 //$location.path('/getallblogs');
					self.myBlogList=true;
					self.allBlogs=false;;
					self.writeBlog=false;
				}, function(error) {
					console.log(error);
				});
			}
			
				
//
//			self.createComment = function() {
//				//self.blog.user=$rootScope.currentUser;
//				console.log("Comment called");
//				//console.log(self.blog.guest);
//				BlogService.addComment(self.comment).then(function(response) {
//					self.comment = response.data;
//					$location.path('/cmmnt');
//				}, function(error) {
//					console.log(error);
//				});
//			}
	

			self.sendBlog= function(blg) {
				
				console.log("Selected Blog controller called");
				
				//BlogService.selectBlog(self.selectedBlog)
				.then(function(response) {
					self.blog = response.data;
					$location.path('/Blog');
				}, function(error) {
					console.log(error);
				});
			}
	
				
				
				
			
			
			
			
			
		
			
			
		}
])