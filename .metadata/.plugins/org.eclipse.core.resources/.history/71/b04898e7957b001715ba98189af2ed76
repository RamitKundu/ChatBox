app.controller('BlogController', [ 'BlogService', '$http', '$scope',
		'$location','$rootScope','$cookieStore', function(BlogService, $http, $scope, $location,$rootScope,$cookieStore) {
			var self = this;
			self.blog = {};
			
			self.myBlog=[];
			//self.selectBlog=[];
			
			
			
			
			self.createBlog = function() {
				self.blog.user=$rootScope.currentUser;
				self.blog.status="New";
				console.log("Blog controller called");
				console.log(self.blog.user);
				BlogService.addBlog(self.blog).then(function() {
					
					//self.blog = response.data;
					alert("Your blog is posted successfully..!!!!")
					
				}, function() {
					console.log();
				});
			}
 
              self.getBlogList = function() {
				
				console.log("BlogList controller called");
				BlogService.listBlog().then(function(response) {
					self.bloglist = response.data;
					console.log(self.bloglist);
					 $location.path('/getallblogs');
					
				}, function(error) {
					console.log(error);
				});
			}
			
              self.getmyBlog= function() {
  				//self.blog.user=$rootScope.currentUser;
  				console.log("show my MyBlogList ");
  				self.buId=$cookieStore.get('currentUser').userId;
  				console.log(self.buId);
  				BlogService.myBlogs(self.buId).then(function(response) {
  					
  					
  					self.myBlogList = response.data;
  					console.log(self.bloglist);
  					console.log(self.myBlog);
  					 $location.path('/getmyblogs');
  					
  				}, function(error) {
  					console.log(error);
  				});
  			}
			
              self.selectBlog= function(blg) {
  				console.log("sendBlog called")
  				self.selectedBlog=blg;
  				console.log(self.selectedBlog)
  				//self.commentList=self.selectedBlog.comments;
  				//console.log(self.selectedBlog.comments)
  				$location.path('/getblg');
  			}
				
			
			
			
		
			
			
		}
])