app.controller('ForumController', [ 'ForumService', '$http', '$scope','$routeParams',
		'$location','$rootScope', function(ForumService, $http, $scope, $location,$rootScope,$routeParams){
	var self = this;
	
	// For All Forums

	self.getForumList = function() {

		console.log("ForumList controller called");
		ForumService.listForum().then(function(response) {
			self.forumlist = response.data;
			console.log(self.forumlist);
            //For ForumCmmnt(explicitly called)
			self.getParams();
		}, function(error) {
			console.log(error);
		});
	}
	self.getForumList();

	//For Create Forum by admin
	
	self.createForum = function() {

		console.log("Forum controller called");

		ForumService.addForum(self.forum).then(function(response) {
			 self.responsedata = response.data;
			 //$rootScope.currentForum=self.responsedata;
			 console.log(self.responsedata);
			 console.log( $rootScope.currentForum);
			// $cookieStore.put('currentUser',self.responsedata);
			alert("Forum Posted successfully..:)");
			$location.path("/allforums");

		}, function(error) {
			console.log(error);
		});
	}
	
	self.getParams = function(){
		if($routeParams.forumId){
			
			self.selectedForumId=$routeParams.forumId;
			console.log(self.selectedForumId);
		
			
		}
	
		
	}
	
	
	self.createComment = function() {

		console.log("Forum Comment controller called");
		self.comment.user = $rootScope.currentUser;
		console.log(self.comment.user);
		self.comment.forum=$rootScope.currentForum;
		console.log(self.comment.forum);
		ForumService.addForumCmmnt(self.comment).then(function() {
			// self.job = response.data;
			// $cookieStore.put('currentUser',self.responsedata);
			alert("Comment Posted successfully..:)");
			//$location.path("/allforums");

		}, function(error) {
			console.log(error);
		});
	}
	

	
	
	
	
	
	
	
	
	
	
	
	
}

])